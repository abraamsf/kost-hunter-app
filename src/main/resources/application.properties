spring.application.name=kost-management

# --- 1. SERVER PORT (WAJIB UNTUK RAILWAY) ---
# Railway akan menyuntikkan port dinamis lewat variabel PORT.
# Jika di laptop (variabel PORT tidak ada), akan pakai port 8080.
server.port=${PORT:8080}

# --- 2. KONEKSI DATABASE (FLEXIBLE) ---
# Spring Boot akan otomatis memilih:
# - Jika di Railway: Menggunakan Environment Variables (MYSQLHOST, MYSQLUSER, dll)
# - Jika di Laptop: Menggunakan nilai default setelah tanda titik dua (localhost, root, dll)

spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# URL JDBC: Menyusun string koneksi secara dinamis
spring.datasource.url=jdbc:mysql://${MYSQLHOST:localhost}:${MYSQLPORT:3306}/${MYSQLDATABASE:kost_db}?allowPublicKeyRetrieval=true&useSSL=false&serverTimezone=Asia/Jakarta

# Username & Password
spring.datasource.username=${MYSQLUSER:root}
spring.datasource.password=${MYSQLPASSWORD:}

# --- 3. KONFIGURASI JPA / HIBERNATE ---
# 'update': Membuat tabel jika belum ada, atau mengubahnya jika ada perubahan model
spring.jpa.hibernate.ddl-auto=update

# Dialect MySQL (Gunakan MySQL8Dialect agar lebih kompatibel dengan versi baru)
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# Tampilkan SQL di log (Matikan/false saat sudah production agar log tidak penuh)
spring.jpa.show-sql=true
spring.jpa.open-in-view=true